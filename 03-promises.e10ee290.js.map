{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAIMC,EAAkBC,SAASC,cAAc,gBACzCC,EAAYF,SAASC,cAAc,eACnCE,EAAcH,SAASC,cAAc,iBACrCG,EAASJ,SAASC,cAAc,QAChCI,EAAaL,SAASC,cAAc,iBAGtCK,EAAkB,EAClBC,EAAY,EACZC,EAAc,EA6BlB,SAASC,EAAcC,EAAUC,GAC/B,IAAMC,EAAgBC,KAAKC,SAAW,GAEtC,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAExBL,EAEAI,EAAS,qBAAmCE,OAAfR,EAAS,QAAYQ,OAANP,EAAM,OAInDM,EAAQ,oBAAkCC,OAAfR,EAAS,QAAYQ,OAANP,EAAM,UApCtDP,EAAOe,iBAAiB,SAExB,SAAqBC,GACnBd,EAAkBP,EAAgBsB,MAClCd,EAAYL,EAAUmB,MACtBb,EAAcL,EAAYkB,SAG5BhB,EAAWc,iBAAiB,SAE5B,SAAuBC,GAMrB,GALAA,EAAEE,iBAKkB,GAAfd,GAAsBA,EAAc,EAEvC,YADAX,EAAA0B,OAAOC,QAAQ,0DA2BSC,EAxBPnB,EAwBmBoB,EAxBFnB,EAwBQoB,EAxBGnB,EAyB3CoB,EAAU,EAGVC,EAASC,OAAOL,GAEpBM,YAAW,WAOT,GAJCtB,EAAcmB,EAASH,GACrBO,MAAK,SAAAhB,GAAcnB,EAAA0B,OAAOU,QAAQjB,GAAUkB,QAAQC,IAAInB,MACxDoB,OAAM,SAAAC,GAAWxC,EAAA0B,OAAOC,QAAQa,GAAQH,QAAQC,IAAIE,MAEpDV,GAAU,EAET,IAAMW,EAAWC,aAAY,WAC3BX,GAAW,EACXC,GAAUC,OAAOJ,GAEdE,EAAUD,EACXa,cAAcF,GAIhB7B,EAAcmB,EAASC,GACtBG,MAAK,SAAAhB,GAAcnB,EAAA0B,OAAOU,QAAQjB,GAAUkB,QAAQC,IAAInB,MACxDoB,OAAM,SAAAC,GAAWxC,EAAA0B,OAAOC,QAAQa,GAAQH,QAAQC,IAAIE,QAEpDX,KAIJD,GAhCP,IAA4BA,EAAYC,EAAMC,EACxCC,EAGAC","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\n\n\nconst firstDelayInput = document.querySelector('[name=delay]');\nconst stepInput = document.querySelector('[name=step]');\nconst amountInput = document.querySelector('[name=amount]');\nconst formEl = document.querySelector('form');\nconst sumbmitBtn = document.querySelector('[type=submit]');\n\n\nlet firstDelayValue = 0;\nlet stepValue = 0;\nlet amountValue = 0;\n// let isActiveInterval = false;\n\n\nformEl.addEventListener('input', onFormInput);\n\nfunction onFormInput(e) {\n  firstDelayValue = firstDelayInput.value;\n  stepValue = stepInput.value;\n  amountValue = amountInput.value;\n}\n\nsumbmitBtn.addEventListener('click', onSubmitClick);\n\nfunction onSubmitClick(e) {\n  e.preventDefault();\n\n  //   if (isActiveInterval) {\n  //       return\n  // };\n  if ((amountValue == 0) || (amountValue < 0)){\n    Notify.failure('Amount must be more then 0 and input must not be blank');\n    return\n  }\n  callCreatePromises(firstDelayValue, stepValue, amountValue);\n}\n\n\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  return new Promise((resolve, reject) => {\n\n    if(shouldResolve){\n      // resolve(`Fulfilled promise ${position} in ${Date.now() - delay}ms`)\n       resolve(`Fulfilled promise ${position} in ${delay}ms`)\n    }\n    else {\n      // reject(`Rejected promise ${position} in ${Date.now() - delay}ms`)\n      reject(`Rejected promise ${position} in ${delay}ms`)\n    }\n  \n  });\n};\n\n\n\nfunction callCreatePromises(firstDelay, step, amount) {\n  let counter = 1\n  // const timeBefore = Date.now()\n  \n  let timing = Number(firstDelay);\n\n  setTimeout(() => {\n      // isActiveInterval = true;\n    \n     createPromise(counter, firstDelay)\n      .then(resolve => {  Notify.success(resolve); console.log(resolve)} )\n      .catch(error => { Notify.failure(error); console.log(error) });\n    \n    if(amount >= 2) {\n\n        const timerId2 = setInterval(() => {\n          counter += 1;\n          timing += Number(step);\n\n          if(counter > amount) {\n            clearInterval(timerId2);\n            return\n          }\n          // createPromise(counter, timeBefore)\n          createPromise(counter, timing)\n          .then(resolve => {  Notify.success(resolve); console.log(resolve)} )\n          .catch(error => { Notify.failure(error); console.log(error)});\n    \n        }, step)\n      \n      }\n\n    }, firstDelay)\n    \n   \n}\n\n\n"],"names":["$h6c0i","parcelRequire","$ce04d3a99e08e73b$var$firstDelayInput","document","querySelector","$ce04d3a99e08e73b$var$stepInput","$ce04d3a99e08e73b$var$amountInput","$ce04d3a99e08e73b$var$formEl","$ce04d3a99e08e73b$var$sumbmitBtn","$ce04d3a99e08e73b$var$firstDelayValue","$ce04d3a99e08e73b$var$stepValue","$ce04d3a99e08e73b$var$amountValue","$ce04d3a99e08e73b$var$createPromise","position","delay","shouldResolve","Math","random","Promise","resolve","reject","concat","addEventListener","e","value","preventDefault","Notify","failure","firstDelay","step","amount","counter","timing","Number","setTimeout","then","success","console","log","catch","error","timerId2","setInterval","clearInterval"],"version":3,"file":"03-promises.e10ee290.js.map"}